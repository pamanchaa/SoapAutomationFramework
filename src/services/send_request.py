'''
Created on May 14, 2025

@author: Prashanth.Amancha
'''
import requests

from config.config import BASE_URL, HEADERS
from data.soap_payloads import get_case_start_payload
from data.soap_payloads import get_do_suspend_payload
from data.soap_payloads import get_nodename_payload
from utils.logger_utils import get_logger
from utils.parse_request_data import print_request_data
from utils.parse_response_data import print_response_data

logger = get_logger()  # ✅ Initialize logger inside send_request.py

def call_do_case_start(proc_name, case_desc):
   #////////////////////////////////////////////////////////////////////////////
    body = get_case_start_payload(proc_name, case_desc)
    #////////////////////////////////////////////////////////////////////////////
    FINAL_URL=BASE_URL + "doCaseStart"
    #////////////////////////////////////////////////////////////////////////////
    logger.info(f"REQUEST DETAILS:")
    logger.info(f"URL = {FINAL_URL}")
    #////////////////////////////////////////////////////////////////////////////
    logger.info(f"HEADERS = {HEADERS}")
    #////////////////////////////////////////////////////////////////////////////
    logger.info(f"PAYLOAD = ")
    logger.info(body)
    #////////////////////////////////////////////////////////////////////////////
    response = requests.post(FINAL_URL, data=body, headers=HEADERS)
    #////////////////////////////////////////////////////////////////////////////
    return response

def call_do_suspend(proc_name, case_num):
    #////////////////////////////////////////////////////////////////////////////
    final_url=BASE_URL + "doSuspend"
    headers=HEADERS
    #////////////////////////////////////////////////////////////////////////////
    body = get_do_suspend_payload(proc_name, case_num)
    #////////////////////////////////////////////////////////////////////////////    
    print_request_data(final_url,headers,body)
    #////////////////////////////////////////////////////////////////////////////
   # logger.info(f"Payload being sent: {body}")  # ✅ Log the payload before sending
    response = requests.post(final_url, data=body, headers=HEADERS)
    #////////////////////////////////////////////////////////////////////////////
    print_response_data(response)
    #////////////////////////////////////////////////////////////////////////////
    #////////////////////////////////////////////////////////////////////////////
    return response

def call_get_nodename():
    #////////////////////////////////////////////////////////////////////////////
    final_url=BASE_URL + "getNodeName"
    headers=HEADERS
    #////////////////////////////////////////////////////////////////////////////
    body = get_nodename_payload()
    #////////////////////////////////////////////////////////////////////////////    
    print_request_data(final_url,headers,body)
    #////////////////////////////////////////////////////////////////////////////
   # logger.info(f"Payload being sent: {body}")  # ✅ Log the payload before sending
    response = requests.post(final_url, data=body, headers=HEADERS)
    #////////////////////////////////////////////////////////////////////////////
    print_response_data(response)
    #////////////////////////////////////////////////////////////////////////////
    #////////////////////////////////////////////////////////////////////////////
    return response